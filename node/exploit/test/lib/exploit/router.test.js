`use strict`;

const expect = require(`chai`).expect,
  express = require('supertest'),
  server = require(`../../../lib/server`);

describe(`When calling the router`, () => {
  
  describe(`When calling /`, () => {
    it(`Then it should load the homepage`, done => {
        express(server)
          .get(`/`)
          .expect(response => {
            expect(response.status).to.equal(200);
            expect(response.type).to.equal(`text/html`);
          })
          .end(done);
    });
  });

  describe(`When calling /reverse`, () => {
    it(`Then it should load the reverse shell page`, done => {
        express(server)
          .get(`/reverse`)
          .expect(response => {
            expect(response.status).to.equal(200);
            expect(response.type).to.equal(`text/html`);
          })
          .end(done);
    });
  });

  describe(`When calling /summary`, () => {
    it(`Then it should load the summary page`, done => {
        express(server)
          .get(`/summary`)
          .expect(response => {
            expect(response.status).to.equal(200);
            expect(response.type).to.equal(`text/html`);
          })
          .end(done);
    });
  });

  describe(`When calling /run`, () => {
    it(`Then it should load the run page`, done => {
        express(server)
          .get(`/run`)
          .expect(response => {
            expect(response.status).to.equal(200);
            expect(response.type).to.equal(`text/html`);
          })
          .end(done);
    });
  });

});
